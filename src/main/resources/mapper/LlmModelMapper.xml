<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lumina.mapper.LlmModelMapper">


    <select id="queryPage" resultType="com.lumina.entity.LlmModel">
        SELECT *
        FROM (SELECT lm.*,
                     mgi.group_id,
                     ROW_NUMBER() OVER (
            PARTITION BY lm.model_name
            ORDER BY lm.output_price DESC
        ) AS rn
              FROM llm_models lm
                       JOIN model_group_items mgi ON lm.model_name = mgi.model_name
              ${ew.customSqlSegment}
              ) t
        WHERE t.rn = 1
        ORDER BY t.output_price DESC
    </select>

</mapper>